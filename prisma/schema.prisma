generator client {
	provider = "prisma-client-js"
}

datasource db {
	provider = "sqlite"
	url      = "file:./dev.db"
}

enum Role {
	ADMIN
	USER
}

model User {
	id           String   @id @default(cuid())
	email        String   @unique
	passwordHash String
	name         String?
	role         Role     @default(USER)
	createdAt    DateTime @default(now())
	updatedAt    DateTime @updatedAt
	chats        Chat[]
}

model Chat {
	id        String   @id @default(cuid())
	title     String
	userId    String
	user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt
	messages  Message[]
}

model Message {
	id        String   @id @default(cuid())
	chatId    String
	chat      Chat     @relation(fields: [chatId], references: [id], onDelete: Cascade)
	role      String
	content   String
	createdAt DateTime @default(now())
}
